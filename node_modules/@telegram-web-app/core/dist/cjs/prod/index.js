var ar=Object.defineProperty;var wn=Object.getOwnPropertyDescriptor;var Pn=Object.getOwnPropertyNames;var An=Object.prototype.hasOwnProperty;var vn=(r,e)=>{for(var n in e)ar(r,n,{get:e[n],enumerable:!0})},Cn=(r,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Pn(e))!An.call(r,s)&&s!==n&&ar(r,s,{get:()=>e[s],enumerable:!(i=wn(e,s))||i.enumerable});return r};var Sn=r=>Cn(ar({},"__esModule",{value:!0}),r);var lr=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var N=(r,e,n)=>(lr(r,e,"read from private field"),n?n.call(r):e.get(r)),V=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},Ir=(r,e,n,i)=>(lr(r,e,"write to private field"),i?i.call(r,n):e.set(r,n),n);var Z=(r,e,n)=>(lr(r,e,"access private method"),n);var qn={};vn(qn,{TELEGRAM_HAPTIC_FEEDBACK:()=>K,TELEGRAM_MAIN_BUTTON:()=>Ze,TELEGRAM_POPUP:()=>ie,TELEGRAM_POPUP_BUTTON:()=>L,TELEGRAM_SCAN_QR_POPUP:()=>Er,TELEGRAM_THEME:()=>A,TELEGRAM_WEB_APP:()=>y,TELEGRAM_WEB_VIEW:()=>m,TelegramWebAppContainer:()=>qt});module.exports=Sn(qn);function ue(r,e,n,i,s,c){function _(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var u=i.kind,b=u==="getter"?"get":u==="setter"?"set":"value",p=!e&&r?i.static?r:r.prototype:null,T=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),h,E=!1,g=n.length-1;g>=0;g--){var w={};for(var P in i)w[P]=P==="access"?{}:i[P];for(var P in i.access)w.access[P]=i.access[P];w.addInitializer=function(v){if(E)throw new TypeError("Cannot add initializers after decoration has completed");c.push(_(v||null))};var S=(0,n[g])(u==="accessor"?{get:T.get,set:T.set}:T[b],w);if(u==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(h=_(S.get))&&(T.get=h),(h=_(S.set))&&(T.set=h),(h=_(S.init))&&s.push(h)}else(h=_(S))&&(u==="field"?s.push(h):T[b]=h)}p&&Object.defineProperty(p,i.name,T),E=!0}function he(r,e,n){for(var i=arguments.length>2,s=0;s<e.length;s++)n=i?e[s].call(r,n):e[s].call(r);return i?n:void 0}function Ee(r,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function t(r,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(r):i?i.value:e.get(r)}function l(r,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,n):s?s.value=n:e.set(r,n),n}var Dr=r=>{if(window.Blob)try{return new window.Blob([r]).size}catch{}let e=r.length;for(let n=r.length-1;n>=0;n--){let i=r.charCodeAt(n);i>127&&i<=2047?e++:i>2047&&i<=65535&&(e+=2),i>=56320&&i<=57343&&n--}return e};var $,at,Mr,lt,Br,ot=class{constructor(){V(this,at);V(this,lt);V(this,$,new Map)}emit(e,...n){let i=N(this,$).get(e);if(!i)return;let s=c=>c(...n);i.forEach(s)}subscribe(e,n){return N(this,$).has(e)||Z(this,lt,Br).call(this,e),Z(this,at,Mr).call(this,e,n),()=>this.unsubscribe(e,n)}unsubscribe(e,n){if(!N(this,$).has(e))return;N(this,$).get(e).delete(n)}hasEvent(e){return N(this,$).has(e)}};$=new WeakMap,at=new WeakSet,Mr=function(e,n){N(this,$).get(e).add(n)},lt=new WeakSet,Br=function(e){let n=new Set;N(this,$).set(e,n)};var ct=r=>{let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e.length,i="";for(let s=0;s<r;s++){let c=Math.floor(Math.random()*n);i+=e[c]}return i};var pt=class{},W=pt;W.BASE_KEY="__telegram__",W.get=e=>{try{return JSON.parse(window.sessionStorage.getItem(pt.BASE_KEY+e))}catch{return null}},W.set=(e,n)=>{try{return window.sessionStorage.setItem(pt.BASE_KEY+e,JSON.stringify(n)),!0}catch{return!1}};var Wr=r=>r==null;var de=r=>{try{return r=r.replace(/\+/g,"%20"),decodeURIComponent(r)}catch{return r}},_t=r=>{if(r=r.replace(/^#/,""),!r.length)return{};if(!r.includes("=")&&!r.includes("?"))return{_path:de(r)};let e={},n=r.indexOf("?");if(n>=0){let s=r.slice(0,n);e._path=de(s),r=r.slice(n+1)}let i=Re(r);for(let[s,c]of Object.entries(i))e[s]=c;return e},Re=r=>r.length?r.split("&").reduce((i,s)=>{let[c,_]=s.split("="),u=de(c),b=Wr(_)?null:de(_);return{...i,[u]:b}},{}):{},Rr=(r,e)=>{let n=r.indexOf("#");if(n<0)return r+"#"+e;let i=r.substr(n+1);return i.indexOf("=")>=0||i.indexOf("?")>=0?r+"&"+e:i.length>0?r+"?"+e:r+e};var xr="initParams",Vr=r=>{let e=_t(r),n=W.get(xr);if(n)for(let[i,s]of Object.entries(n))typeof e[i]>"u"&&(e[i]=s);return W.set(xr,e),e};var kr=r=>{r=r.replace(/[\s#]/g,""),r.length===3&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);let e=parseInt(r.slice(0,2),16),n=parseInt(r.slice(2,4),16),i=parseInt(r.slice(4,6),16);return Math.sqrt(.299*(e*e)+.587*(n*n)+.114*(i*i))<120};var me=r=>r==="http:"||r==="https:";var On=["t.me","telegram.me","telegram.dog"],yn=r=>r.split(".").length>2,be=r=>{let e=r.toLowerCase();if(yn(e)){let[n,i]=r.split(".").reverse();e=`${i}.${n}`}return On.includes(e)};var Nn=/^\s*#([0-9a-f]{6})\s*$/i,In=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i,Dn=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/,cr=r=>(r<16?"0":"")+r.toString(16),q=r=>{if(typeof r!="string"&&typeof r!="number")return!1;let e=r.toString(),n=Nn.exec(e);if(n)return"#"+n[1].toLowerCase();let i=In.exec(e);if(i){let[,c,_,u]=i;return("#"+c+c+_+_+u+u).toLowerCase()}let s=Dn.exec(e);if(s){let c=cr(parseInt(s[1])),_=cr(parseInt(s[2])),u=cr(parseInt(s[3]));return"#"+c+_+u}return!1};var xe,Te=class{constructor(){V(this,xe,new Set)}add(e){N(this,xe).add(e)}invoke(e){N(this,xe).forEach(n=>n.call(e))}};xe=new WeakMap;function Mn(r,e){if(e.kind!=="method")throw new TypeError(`'bindMethod' cannot decorate kinds different from 'method'. Passed kind: ${e.kind}.`);if(e.private){let n=String(e.name);throw new Error(`'bindMethod' cannot decorate private properties like ${n}.`)}e.addInitializer(function(){this[e.name]=this[e.name].bind(this)})}function ge(r,e){if(e.kind!=="class")throw new TypeError(`'bindMethods' cannot decorate kinds different from 'class'. Passed kind: ${e.kind}.`);let n=new Te,i=_=>{n.add(_)},s=function(..._){let u=new r(..._);return n.invoke(u),u};return s.prototype=r.prototype,Object.getOwnPropertyNames(r).filter(_=>_!=="length"&&_!=="constructor"&&_!=="prototype"&&_!=="name").forEach(_=>{let u=Object.getOwnPropertyDescriptor(r,_);Object.defineProperty(s,_,u)}),Object.getOwnPropertyNames(r.prototype).filter(_=>_!=="constructor").forEach(_=>{let u=Object.getOwnPropertyDescriptor(r.prototype,_);u?.value&&Mn(u.value,{kind:"method",name:_,private:!1,addInitializer:i})}),s}var ft=class extends Error{constructor(e){super(`[Telegram.WebApp] Haptic feedback type is invalid ${e}`)}};var ut=class extends Error{constructor(e){super(`[Telegram.WebApp] Haptic impact style is invalid ${e}`)}};var ht=class extends Error{constructor(e){super(`[Telegram.WebApp] Haptic notification type is invalid ${e}`)}};var Et=class extends Error{constructor(){super("[Telegram.WebApp] Invoice is already opened")}};var dt=class extends Error{constructor(e){super(`[Telegram.WebApp] Invoice url is invalid ${e}`)}};var mt=class extends Error{constructor(){super("[Telegram.WebApp] Popup is already opened")}};var I=class extends Error{constructor(e){super(`[Telegram.WebApp] Popup ${e}`)}};var bt=class extends Error{constructor(){super("[Telegram.WebApp] Popup is already opened")}};var Tt=class extends Error{constructor(e){super(`[Telegram.WebApp] Scan QR popup ${e}`)}};var gt=class extends RangeError{constructor(e,n,i){let s=`[Telegram.WebApp] ${n} from feature ${e} is unavailable in version ${i}`;super(s)}};var wt=class extends Error{constructor(e){super(`[Telegram.WebApp] Background color format is invalid ${e}`)}};var Ve=class extends Error{constructor(e){super(`[Telegram.WebApp] Data ${e}`)}};var Pt=class extends Error{constructor(e){super(`[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color' ${e}`)}};var ke=class extends Error{constructor(e){super(`[Telegram.WebApp] Choose chat ${e}`)}};var At=class extends Error{constructor(){super("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline")}};var vt=class extends Error{constructor(e){super(`[Telegram.WebApp] Inline query ${e}`)}};var ee=class extends Error{constructor(e){super(`[Telegram.WebApp] Main button ${e}`)}};var F=class extends Error{constructor(e,n){super(`[Telegram.WebApp] Method ${e} is not supported in version ${n}`)}};var we=class extends Error{constructor(e){super(`[Telegram.WebApp] Url ${e}`)}};var Bn=r=>r!=="length"&&r!=="constructor"&&r!=="prototype"&&r!=="name",Wn=(r,e)=>{let n=Object.getPrototypeOf(r);Object.setPrototypeOf(e,n)},Lr=r=>{let e=new Te,n=s=>{e.add(s)},i=function(...s){let c=new r(...s);return e.invoke(c),c};return Wn(r,i),Object.getOwnPropertyNames(r).filter(Bn).forEach(s=>{let c=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(i,s,c)}),{wrapper:i,addInitializer:n}};var te,Ct,Hr,St,Gr,Ot,Ur,yt,Fr,M=class{static set version(e){N(this,te)??Ir(this,te,e)}static inVersion(e){return(n,i)=>{if(i.kind!=="class")throw new TypeError(`'FeatureSupport' cannot decorate kinds different from 'class'. Passed kind: ${i.kind}.`);let{wrapper:s,addInitializer:c}=Lr(n);return Z(this,Ct,Hr).call(this,n).map(Z(this,St,Gr).call(this,n)).filter(Z(this,Ot,Ur)).forEach(({methodName:u,descriptor:b})=>{let p=b.value,T=({feature:E,method:g,supportedVersion:w})=>{if(console.log("deorate when string"),!N(this,te).isSuitableTo(w))throw new gt(E,g,N(this,te).value)},h=E=>Z(this,yt,Fr).call(this,E);c(function(){let E=this;b.value=function(...g){if(typeof e=="string")return T({feature:n.name,method:u,supportedVersion:e});let w=()=>p.apply(this,g);if(typeof e.methodsConfig=="function"){if(!e.availableInVersion)throw new TypeError("Property 'availableInVersion' required in config");let P=h({availableInVersion:e.availableInVersion,executeOriginalMethod:w,name:u,thisArg:E});return e.methodsConfig(P)}if(e.methodsConfig[u]){let{availableInVersion:P,decorate:S}=e.methodsConfig[u];if(!e.availableInVersion&&!P)throw new TypeError(`Property 'availableInVersion' required either in top level config or in method ${u} config`);let v=P??e.availableInVersion;if(!S)return T({feature:n.name,method:u,supportedVersion:v});let se=h({availableInVersion:v,executeOriginalMethod:w,name:u,thisArg:E});return S(se)}return p.apply(this,g)},Object.defineProperty(n.prototype,u,b)})}),s}}};te=new WeakMap,Ct=new WeakSet,Hr=function(e){let n=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(n).filter(i=>i!=="constructor")},St=new WeakSet,Gr=function(e){let n=Object.getPrototypeOf(e);return i=>{let s=Object.getOwnPropertyDescriptor(n,i);if(!s)throw new Error(`Cannot find descriptor for ${i}`);return{methodName:i,descriptor:s}}},Ot=new WeakSet,Ur=function({descriptor:e}){return!!e?.value},yt=new WeakSet,Fr=function(e){let n=N(this,te).isSuitableTo(e.availableInVersion);return{appVersion:N(this,te).value,isSupported:n,...e}},V(M,Ct),V(M,St),V(M,Ot),V(M,yt),V(M,te,void 0);var pr,Pe,re,Le,Ae,Kr,m={EVENTS:{SEND:{WEB_APP_READY:"web_app_ready",WEB_APP_EXPAND:"web_app_expand",WEB_APP_CLOSE:"web_app_close",WEB_APP_OPEN_POPUP:"web_app_open_popup",WEB_APP_SETUP_CLOSING_BEHAVIOR:"web_app_setup_closing_behavior",WEB_APP_SET_BACKGROUND_COLOR:"web_app_set_background_color",WEB_APP_SET_HEADER_COLOR:"web_app_set_header_color",WEB_APP_DATA_SEND:"web_app_data_send",WEB_APP_TRIGGER_HAPTIC_FEEDBACK:"web_app_trigger_haptic_feedback",WEB_APP_OPEN_LINK:"web_app_open_link",WEB_APP_OPEN_TG_LINK:"web_app_open_tg_link",WEB_APP_OPEN_INVOICE:"web_app_open_invoice",WEB_APP_REQUEST_VIEWPORT:"web_app_request_viewport",WEB_APP_REQUEST_THEME:"web_app_request_theme",WEB_APP_SETUP_MAIN_BUTTON:"web_app_setup_main_button",WEB_APP_SETUP_BACK_BUTTON:"web_app_setup_back_button",WEB_APP_OPEN_SCAN_QR_POPUP:"web_app_open_scan_qr_popup",WEB_APP_CLOSE_SCAN_QR_POPUP:"web_app_close_scan_qr_popup",WEB_APP_READ_TEXT_FROM_CLIPBOARD:"web_app_read_text_from_clipboard",WEB_APP_SWITCH_INLINE_QUERY:"web_app_switch_inline_query",PAYMENT_FORM_SUBMIT:"payment_form_submit",SHARE_SCORE:"share_score",SHARE_GAME:"share_game",GAME_OVER:"game_over",GAME_LOADED:"game_loaded",RESIZE_FRAME:"resize_frame"},RECEIVE:{MAIN_BUTTON_PRESSED:"main_button_pressed",SETTINGS_BUTTON_PRESSED:"settings_button_pressed",BACK_BUTTON_PRESSED:"back_button_pressed",INVOICE_CLOSED:"invoice_closed",VIEWPORT_CHANGED:"viewport_changed",THEME_CHANGED:"theme_changed",POPUP_CLOSED:"popup_closed",QR_TEXT_RECEIVED:"qr_text_received",SCAN_QR_POPUP_CLOSED:"scan_qr_popup_closed",CLIPBOARD_TEXT_RECEIVED:"clipboard_text_received"}}},Nt=class{constructor(e){if(pr.add(this),Pe.set(this,void 0),re.set(this,new Map),Le.set(this,window.parent!=null&&window!=window.parent),Ae.set(this,null),Object.defineProperty(this,"postEvent",{enumerable:!0,configurable:!0,writable:!0,value:(n,i,s="")=>{if(window.TelegramWebviewProxy){window.TelegramWebviewProxy.postEvent(n,JSON.stringify(s)),i?.();return}if(window.external&&"notify"in window.external){window.external.notify(JSON.stringify({eventType:n,eventData:s})),i?.();return}if(t(this,Le,"f"))try{let c="*";window.parent.postMessage(JSON.stringify({eventType:n,eventData:s}),c),t(this,Pe,"f").tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",n,s),i?.()}catch(c){i?.(c)}t(this,Pe,"f").tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",n,s),i?.({notAvailable:!0})}}),Object.defineProperty(this,"onEvent",{enumerable:!0,configurable:!0,writable:!0,value:(n,i)=>{t(this,re,"f").has(n)||t(this,re,"f").set(n,new Set),t(this,re,"f").get(n).add(i)}}),Object.defineProperty(this,"offEvent",{enumerable:!0,configurable:!0,writable:!0,value:(n,i)=>{t(this,re,"f").has(n)&&t(this,re,"f").get(n).delete(i)}}),Object.defineProperty(this,"callEventCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:(n,i)=>{t(this,re,"f").get(n)?.forEach(c=>{try{i(c)}catch{}})}}),Object.defineProperty(this,"receiveEvent",{enumerable:!0,configurable:!0,writable:!0,value:(n,i)=>{this.callEventCallbacks(n,s=>s(n,i))}}),l(this,Pe,e,"f"),t(this,Le,"f")){l(this,Ae,document.createElement("style"),"f"),document.head.appendChild(t(this,Ae,"f")),t(this,pr,"m",Kr).call(this);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}get initParams(){return t(this,Pe,"f")}get isIframe(){return t(this,Le,"f")}};Pe=new WeakMap,re=new WeakMap,Le=new WeakMap,Ae=new WeakMap,pr=new WeakSet,Kr=function(){window.addEventListener("message",e=>{if(e.source===window.parent)try{let n=JSON.parse(e.data);if(!n.eventType)return;if(n.eventType==="set_custom_style"&&t(this,Ae,"f")){t(this,Ae,"f").innerHTML=n.eventData;return}this.receiveEvent(n.eventType,n.eventData)}catch{}})};var ae={UPDATED:"updated",CLICKED:"clicked",OFF_CLICKED:"off_clicked"},He=Symbol("on_event"),_r=(()=>{var r,e,n,i,s,c;let _=[M.inVersion({availableInVersion:"6.1",methodsConfig:({appVersion:h,executeOriginalMethod:E,isSupported:g,thisArg:w})=>g?E():(console.warn(`[Telegram.WebApp] BackButton is not supported in version ${h}`),w)}),ge],u,b=[],p;var T=p=class{constructor({eventEmitter:h}){r.add(this),e.set(this,void 0),n.set(this,!1),i.set(this,t(this,n,"f")),l(this,e,h,"f")}[(e=new WeakMap,n=new WeakMap,i=new WeakMap,r=new WeakSet,s=function(){let E=t(this,n,"f");t(this,i,"f")!==E&&(l(this,i,E,"f"),t(this,e,"f").emit(ae.UPDATED,{is_visible:t(this,n,"f")}))},c=function(E){return typeof E.is_visible<"u"&&l(this,n,!!E.is_visible,"f"),t(this,r,"m",s).call(this),this},He)](h,E){return t(this,e,"f").subscribe(h,E)}onClick(h){return t(this,e,"f").emit(ae.CLICKED,h),this}offClick(h){return t(this,e,"f").emit(ae.OFF_CLICKED,h),this}show(){return t(this,r,"m",c).call(this,{is_visible:!0})}hide(){return t(this,r,"m",c).call(this,{is_visible:!1})}get isVisible(){return t(this,n,"f")}set isVisible(h){t(this,r,"m",c).call(this,{is_visible:h})}};return Ee(p,"WebAppBackButton"),ue(null,u={value:p},_,{kind:"class",name:p.name},null,b),T=p=u.value,he(p,b),T=p})();var It,le,Ge,Dt,fr,jr,$r,Rn={COLOR_SCHEME_CHANGED:"color_scheme_changed",THEME_PARAM_SET:"theme_param_set",THEME_PARAMS_CHANGED:"theme_params_changed"},A={COLOR_SCHEMES:{LIGHT:"light",DARK:"dark"},PARAMS:{BG_COLOR:"bg_color",TEXT_COLOR:"text_color",HINT_COLOR:"hint_color",LINK_COLOR:"link_color",BUTTON_COLOR:"button_color",BUTTON_TEXT_COLOR:"button_text_color",SECONDARY_BG_COLOR:"secondary_bg_color"},HEADER_COLOR:{BG_COLOR:"bg_color",SECONDARY_BG_COLOR:"secondary_bg_color"}},k=class{static get EVENTS(){return Rn}constructor(e){It.add(this),le.set(this,void 0),Ge.set(this,new Map),Dt.set(this,A.COLOR_SCHEMES.LIGHT),fr.set(this,()=>Object.fromEntries(t(this,Ge,"f"))),Object.defineProperty(this,"setParams",{enumerable:!0,configurable:!0,writable:!0,value:n=>{n.bg_color==="#1c1c1d"&&n.bg_color===n.secondary_bg_color&&(n.secondary_bg_color="#2c2c2e");for(let i in n){let s=q(n[i]);if(s){if(this.setParam(i,s),i==="bg_color"){let c=t(this,It,"m",jr).call(this,s);t(this,It,"m",$r).call(this,c)}t(this,le,"f").emit(k.EVENTS.THEME_PARAM_SET,i,s)}}t(this,le,"f").emit(k.EVENTS.THEME_PARAMS_CHANGED,this.params)}}),l(this,le,e,"f")}on(e,n){return t(this,le,"f").subscribe(e,n)}getParam(e){return t(this,Ge,"f").get(e)??null}setParam(e,n){t(this,Ge,"f").set(e,n)}get params(){return t(this,fr,"f").call(this)}get colorScheme(){return t(this,Dt,"f")}};le=new WeakMap,Ge=new WeakMap,Dt=new WeakMap,fr=new WeakMap,It=new WeakSet,jr=function(e){return kr(e)?A.COLOR_SCHEMES.DARK:A.COLOR_SCHEMES.LIGHT},$r=function(e){l(this,Dt,e,"f"),t(this,le,"f").emit(k.EVENTS.COLOR_SCHEME_CHANGED,e)};var ur,Ue,Fe,ve,Mt,Xr,ne=class{static get EVENTS(){return{UPDATED:"updated"}}constructor({eventEmitter:e,themeParams:n}){ur.add(this),Ue.set(this,void 0),Fe.set(this,void 0),ve.set(this,A.HEADER_COLOR.BG_COLOR),Mt.set(this,null),Object.defineProperty(this,"get",{enumerable:!0,configurable:!0,writable:!0,value:()=>t(this,ve,"f")===A.HEADER_COLOR.SECONDARY_BG_COLOR?t(this,Fe,"f").call(this).secondary_bg_color:t(this,ve,"f")===A.HEADER_COLOR.BG_COLOR?t(this,Fe,"f").call(this).bg_color:t(this,ve,"f")}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:()=>{let i=this.get();t(this,Mt,"f")!=i&&(l(this,Mt,i,"f"),t(this,Ue,"f").emit(ne.EVENTS.UPDATED,i))}}),Object.defineProperty(this,"set",{enumerable:!0,configurable:!0,writable:!0,value:i=>{l(this,ve,t(this,ur,"m",Xr).call(this,i),"f"),this.update()}}),l(this,Ue,e,"f"),l(this,Fe,n,"f")}on(e,n){return t(this,Ue,"f").subscribe(e,n)}};Ue=new WeakMap,Fe=new WeakMap,ve=new WeakMap,Mt=new WeakMap,ur=new WeakSet,Xr=function(e){if(e===A.HEADER_COLOR.BG_COLOR||e===A.HEADER_COLOR.SECONDARY_BG_COLOR)return e;let n=q(e);if(!n)throw new wt(e);return n};var Ce,Bt=class{constructor(){Ce.set(this,new Map)}setRequest(e,n){t(this,Ce,"f").set(e,n??null)}getRequest(e){return t(this,Ce,"f").get(e)??null}removeRequest(e){t(this,Ce,"f").delete(e)}hasRequest(e){return t(this,Ce,"f").has(e)}};Ce=new WeakMap;var K={IMPACT_STYLES:{LIGHT:"light",MEDIUM:"medium",HEAVY:"heavy",RIGID:"rigid",SOFT:"soft"},FEEDBACK_TYPES:{IMPACT:"impact",NOTIFICATION:"notification",SELECTION_CHANGE:"selection_change"},NOTIFICATION_TYPES:{ERROR:"error",SUCCESS:"success",WARNING:"warning"}},xn=Object.values(K.IMPACT_STYLES),Vn=Object.values(K.FEEDBACK_TYPES),kn=Object.values(K.NOTIFICATION_TYPES),Ln={FEEDBACK_TRIGGERED:"feedback_triggered"},Yr=Symbol("on_event"),Ke=(()=>{var r,e,n,i,s,c;let _=[M.inVersion({availableInVersion:"6.1",methodsConfig:({appVersion:h,executeOriginalMethod:E,isSupported:g,thisArg:w})=>g?E():(console.warn(`[Telegram.WebApp] HapticFeedback is not supported in version ${h}`),w)}),ge],u,b=[],p;var T=p=class{static get EVENTS(){return Ln}static get PRIVATE_KEYS(){return{ON_EVENT:Yr}}constructor(h){r.add(this),e.set(this,void 0),l(this,e,h,"f")}[(e=new WeakMap,r=new WeakSet,n=function(E){return E?xn.includes(E):!1},i=function(E){return Vn.includes(E)},s=function(E){return E?kn.includes(E):!1},c=function(E){if(!t(this,r,"m",i).call(this,E.type))throw new ft(E.type);if(E.type===K.FEEDBACK_TYPES.IMPACT&&!t(this,r,"m",n).call(this,E.impact_style))throw new ut(E.impact_style);if(E.type===K.FEEDBACK_TYPES.NOTIFICATION&&!t(this,r,"m",s).call(this,E.notification_type))throw new ht(E.notification_type);return E.type,K.FEEDBACK_TYPES.SELECTION_CHANGE,t(this,e,"f").emit(T.EVENTS.FEEDBACK_TRIGGERED,E),this},Yr)](h,E){return t(this,e,"f").subscribe(h,E)}impactOccurred(h){return t(this,r,"m",c).call(this,{type:K.FEEDBACK_TYPES.IMPACT,impact_style:h})}notificationOccurred(h){return t(this,r,"m",c).call(this,{type:K.FEEDBACK_TYPES.NOTIFICATION,notification_type:h})}selectionChanged(){return t(this,r,"m",c).call(this,{type:K.FEEDBACK_TYPES.SELECTION_CHANGE})}};return Ee(p,"WebAppHapticFeedback"),ue(null,u={value:p},_,{kind:"class",name:p.name},null,b),T=p=u.value,he(p,b),T=p})();var je,Wt,Hn=r=>r[0]==="{"&&r.at(-1)==="}",Gn=r=>r[0]==="["&&r.at(-1)==="]",Un=r=>Hn(r)||Gn(r),Rt=class{constructor(e){if(je.set(this,""),Wt.set(this,new Map),!e)return;l(this,je,e,"f");let n=Re(t(this,je,"f"));for(let[i,s]of Object.entries(n))if(Un(s))try{t(this,Wt,"f").set(i,JSON.parse(s))}catch{}}get rawData(){return t(this,je,"f")}get unsafeData(){return Object.fromEntries(t(this,Wt,"f"))}};je=new WeakMap,Wt=new WeakMap;var ce,Fn=/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/,xt=class{constructor(){ce.set(this,new Map)}create(e){let{hostname:n,pathname:i,protocol:s}=new URL(e),_=(i.match(Fn)??[])[2];if(!me(s)||!be(n)||!_)throw new dt(e);if(t(this,ce,"f").has(_))throw new Et;return _}save(e,n){t(this,ce,"f").set(e,n)}remove(e){let n=t(this,ce,"f").get(e);return t(this,ce,"f").delete(e),n??null}has(e){return t(this,ce,"f").has(e)}};ce=new WeakMap;var B,$e,Vt,Kn="url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')",kt=class{constructor({onClick:e,onUpdate:n}){B.set(this,void 0),$e.set(this,0),Vt.set(this,void 0),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:c=>{c.is_visible?(t(this,B,"f").style.display="block",l(this,$e,48,"f"),t(this,B,"f").style.opacity=c.is_active?"1":"0.8",t(this,B,"f").style.cursor=c.is_active?"pointer":"auto",t(this,B,"f").disabled=!c.is_active,t(this,B,"f").innerText=c.text,t(this,B,"f").style.backgroundImage=c.is_progress_visible?Kn:"none",t(this,B,"f").style.backgroundColor=c.color,t(this,B,"f").style.color=c.text_color):(t(this,B,"f").style.display="none",l(this,$e,0,"f")),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=t(this,$e,"f")+"px"),t(this,Vt,"f").call(this)}}),l(this,Vt,n,"f"),l(this,B,document.createElement("tg-main-button"),"f");let i={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(let[c,_]of Object.entries(i))t(this,B,"f").style[c]=_;let s=()=>{document.removeEventListener("DOMContentLoaded",s),document.body.appendChild(t(this,B,"f")),t(this,B,"f").addEventListener("click",e,!1)};document.addEventListener("DOMContentLoaded",s)}};B=new WeakMap,$e=new WeakMap,Vt=new WeakMap;var R,z,Xe,Ye,Qe,Se,qe,ze,Je,Gt,Lt,Ut,Qr,Ht,hr,qr,zr,Jr,Zr,en,jn={DEBUG_BUTTON_CLICKED:"debug_button_clicked",DEBUG_BUTTON_UPDATED:"debug_button_updated",UPDATED:"updated",CLICKED:"clicked",OFF_CLICKED:"off_clicked"},Ze={MAX_TEXT_LENGTH:64,DEFAULT_COLOR:"#2481cc",DEFAULT_TEXT_COLOR:"#ffffff"},D=class{static get EVENTS(){return jn}constructor({eventEmitter:e,theme:n,isDebug:i=!1}){R.add(this),z.set(this,void 0),Xe.set(this,void 0),Ye.set(this,!1),Qe.set(this,!0),Se.set(this,!1),qe.set(this,"CONTINUE"),ze.set(this,!1),Je.set(this,!1),Gt.set(this,void 0),Lt.set(this,null),Ut.set(this,null),Object.defineProperty(this,"setParams",{enumerable:!0,configurable:!0,writable:!0,value:s=>{var c,_,u,b,p;return t(c=t(_=t(u=t(b=t(p=t(this,R,"m",qr).call(this,s.text),R,"m",zr).call(p,s.color),R,"m",Jr).call(b,s.text_color),R,"m",Zr).call(u,s.is_visible),R,"m",en).call(_,s.is_active),R,"m",Ht).call(c),this}}),Object.defineProperty(this,"setText",{enumerable:!0,configurable:!0,writable:!0,value:s=>this.setParams({text:s})}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:s=>(t(this,z,"f").emit(D.EVENTS.CLICKED,s),this)}),Object.defineProperty(this,"offClick",{enumerable:!0,configurable:!0,writable:!0,value:s=>(t(this,z,"f").emit(D.EVENTS.OFF_CLICKED,s),this)}),Object.defineProperty(this,"show",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.setParams({is_visible:!0})}),Object.defineProperty(this,"hide",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.setParams({is_visible:!1})}),Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.setParams({is_active:!0})}),Object.defineProperty(this,"disable",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.setParams({is_active:!1})}),Object.defineProperty(this,"showProgress",{enumerable:!0,configurable:!0,writable:!0,value:s=>(this.isActive=!!s,l(this,Se,!0,"f"),t(this,R,"m",Ht).call(this),this)}),Object.defineProperty(this,"hideProgress",{enumerable:!0,configurable:!0,writable:!0,value:()=>(this.isActive||(this.isActive=!0),l(this,Se,!1,"f"),t(this,R,"m",Ht).call(this),this)}),l(this,z,e,"f"),l(this,Xe,n,"f"),l(this,Gt,i,"f"),i&&l(this,Ut,new kt({onClick:()=>{t(this,z,"f").emit(D.EVENTS.DEBUG_BUTTON_CLICKED,this.isActive)},onUpdate:()=>{t(this,z,"f").emit(D.EVENTS.DEBUG_BUTTON_UPDATED)}}),"f")}on(e,n){return t(this,z,"f").subscribe(e,n)}set text(e){this.setParams({text:e})}get text(){return t(this,qe,"f")}set color(e){this.setParams({color:e})}get color(){return t(this,ze,"f")||t(this,Xe,"f").getParam(A.PARAMS.BUTTON_COLOR)||Ze.DEFAULT_COLOR}set textColor(e){this.setParams({text_color:e})}get textColor(){return t(this,Je,"f")||t(this,Xe,"f").getParam(A.PARAMS.BUTTON_TEXT_COLOR)||Ze.DEFAULT_TEXT_COLOR}set isVisible(e){this.setParams({is_visible:e})}get isVisible(){return t(this,Ye,"f")}get isProgressVisible(){return t(this,Se,"f")}set isActive(e){this.setParams({is_active:e})}get isActive(){return t(this,Qe,"f")}};z=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,Se=new WeakMap,qe=new WeakMap,ze=new WeakMap,Je=new WeakMap,Gt=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,R=new WeakSet,Qr=function(){return{is_visible:t(this,Ye,"f"),is_active:t(this,Qe,"f"),is_progress_visible:t(this,Se,"f"),text:t(this,qe,"f"),color:this.color,text_color:this.textColor}},Ht=function(){let e=t(this,R,"m",Qr).call(this),n=JSON.stringify(e);t(this,Lt,"f")!==n&&(l(this,Lt,n,"f"),t(this,z,"f").emit(D.EVENTS.UPDATED,e),t(this,Gt,"f")&&t(this,Ut,"f").update(e))},hr=function(e){return e===!1||e===null},qr=function(e){if(typeof e>"u")return this;let n=e.trim();if(!n.length)throw new ee(`text is required ${e}`);if(n.length>Ze.MAX_TEXT_LENGTH)throw new ee(`text is too long ${n}`);return l(this,qe,n,"f"),this},zr=function(e){if(typeof e>"u")return this;if(t(this,R,"m",hr).call(this,e))return l(this,ze,!1,"f"),this;let n=q(e);if(!n)throw new ee(`color format is invalid ${e}`);return l(this,ze,n,"f"),this},Jr=function(e){if(typeof e>"u")return this;if(t(this,R,"m",hr).call(this,e))return l(this,Je,!1,"f"),this;let n=q(e);if(!n)throw new ee(`text color format is invalid ${e}`);return l(this,Je,n,"f"),this},Zr=function(e){if(typeof e>"u")return this;if(e&&!this.text.length)throw new ee("text is required");return l(this,Ye,e,"f"),this},en=function(e){return typeof e>"u"?this:(l(this,Qe,e,"f"),this)};var et,J,tn,rn,nn,L={TYPES:{DEFAULT:"default",OK:"ok",CLOSE:"close",CANCEL:"cancel",DESTRUCTIVE:"destructive"},MAX_ID_LENGTH:64,MAX_TEXT_LENGTH:64},$n=Object.values(L.TYPES),Xn=[L.TYPES.DEFAULT,L.TYPES.DESTRUCTIVE],X=class{constructor(e){var n,i;et.add(this),J.set(this,{});let{id:s,type:c,text:_}=e instanceof X?e.data:e;t(n=t(i=t(this,et,"m",tn).call(this,s),et,"m",rn).call(i,c),et,"m",nn).call(n,_)}get data(){return t(this,J,"f")}};J=new WeakMap,et=new WeakSet,tn=function(e){let n=(e??"").toString();if(n.length>L.MAX_ID_LENGTH)throw new I(`button id is too long ${e}`);return t(this,J,"f").id=n,this},rn=function(e){if(!$n.includes(e))throw new I(`button type is invalid ${e}`);return t(this,J,"f").type=e,this},nn=function(e){if(!t(this,J,"f").type)throw new I("You should set type for `WebAppPopupButton` before setting the text");if(!Xn.includes(t(this,J,"f").type))return;let i=(e??"").toString().trim();if(!i)throw new I(`button text is required for type ${t(this,J,"f").type} ${e}`);if(i.length>L.MAX_TEXT_LENGTH)throw new I(`button text is too long ${i}`);t(this,J,"f").text=i};var Oe,ye,j,on,an,ln,cn,ie={MAX_TITLE_LENGTH:64,MAX_MESSAGE_LENGTH:256,MIN_BUTTONS:1,MAX_BUTTONS:3},sn=()=>({params:{},callback:null}),Ft=class{constructor(){Oe.add(this),ye.set(this,!1),j.set(this,sn())}open({params:{title:e,message:n,buttons:i},callback:s}){var c,_,u;t(this,ye,"f")||(t(c=t(_=t(u=t(this,Oe,"m",an).call(this,e),Oe,"m",ln).call(u,n),Oe,"m",cn).call(_,i),Oe,"m",on).call(c,s),l(this,ye,!0,"f"))}close(){l(this,ye,!1,"f"),l(this,j,sn(),"f")}get isOpened(){return t(this,ye,"f")}get params(){return Object.keys(t(this,j,"f").params).length>0?t(this,j,"f").params:null}get callback(){return t(this,j,"f").callback}};ye=new WeakMap,j=new WeakMap,Oe=new WeakSet,on=function(e){return e&&(t(this,j,"f").callback=e),this},an=function(e){if(!e)return this;let n=e.trim();if(!n.length)return this;if(e.length>ie.MAX_TITLE_LENGTH)throw new I(`title is too long ${e}`);return t(this,j,"f").params.title=n,this},ln=function(e){let n=(e??"").trim();if(!n)throw new I(`message is required ${e}`);if(n.length>ie.MAX_MESSAGE_LENGTH)throw console.error("[Telegram.WebApp] Popup message is too long",n),new I(`message is too long ${n}`);return t(this,j,"f").params.message=n,this},cn=function(e){if(!e){let i=[new X({type:L.TYPES.CLOSE,id:ct(5)}).data];return t(this,j,"f").params.buttons=i,this}if(!Array.isArray(e))throw new I(`buttons should be an array ${e}`);if(e.length<ie.MIN_BUTTONS)throw new I(`should have at least ${ie.MIN_BUTTONS} button`);if(e.length>ie.MAX_BUTTONS)throw new I(`should not have more than ${ie.MAX_BUTTONS} buttons`);let n=e.map(i=>new X(i).data);return t(this,j,"f").params.buttons=n,this};var Ne,pe,pn={params:{},callback:null},Er={MAX_TEXT_LENGTH:64},Kt=class{constructor(){Ne.set(this,!1),pe.set(this,pn)}open({params:{text:e},callback:n}){if(t(this,Ne,"f"))throw new bt;let i=(e??"").trim();if(i.length>Er.MAX_TEXT_LENGTH)throw new Tt(`text is too long ${e}`);i&&(t(this,pe,"f").params.text=i),t(this,pe,"f").callback=n,l(this,Ne,!0,"f")}close(){l(this,Ne,!1,"f"),l(this,pe,pn,"f")}get isOpened(){return t(this,Ne,"f")}get params(){return t(this,pe,"f").params}get callback(){return t(this,pe,"f").callback??null}};Ne=new WeakMap,pe=new WeakMap;var _e,Ie,dr,mr,_n,jt={LESS:-1,EQUAL:0,GREATER:1},$t=class{constructor(e){_e.add(this),Ie.set(this,void 0),l(this,Ie,e,"f")}get value(){return t(this,Ie,"f")}set(e){l(this,Ie,e,"f")}isSuitableTo(e){return t(this,_e,"m",_n).call(this,t(this,Ie,"f"),e)>=jt.EQUAL}};Ie=new WeakMap,_e=new WeakSet,dr=function(e){return e.replace(/^\s+|\s+$/g,"").split(".")},mr=function(e){if(typeof e>"u"||e===null)return 0;let n=parseInt(e);return isNaN(n)?0:n},_n=function(e="",n=""){typeof e!="string"&&(e=""),typeof n!="string"&&(n="");let i=t(this,_e,"m",dr).call(this,e),s=t(this,_e,"m",dr).call(this,n),c=Math.max(i.length,s.length);for(let _=0;_<c;_++){let u=t(this,_e,"m",mr).call(this,i[_]),b=t(this,_e,"m",mr).call(this,s[_]);if(u!==b)return u>b?jt.GREATER:jt.LESS}return jt.EQUAL};var De,Me,tt,rt,Xt,fe,br,Tr,Y=class{static get EVENTS(){return{VIEWPORT_CHANGED:"viewport_changed",HEIGHT_CALCULATED:"height_calculated"}}constructor({eventEmitter:e,mainButtonHeight:n}){De.add(this),Me.set(this,void 0),tt.set(this,!1),rt.set(this,!1),Xt.set(this,!0),fe.set(this,void 0),Object.defineProperty(this,"setHeight",{enumerable:!0,configurable:!0,writable:!0,value:i=>{typeof i<"u"&&(l(this,Xt,!!i.is_expanded,"f"),l(this,tt,i.height,"f"),i.is_state_stable&&l(this,rt,i.height,"f"),t(this,Me,"f").emit(Y.EVENTS.VIEWPORT_CHANGED,!!i.is_state_stable));let s=t(this,De,"m",br).call(this,t(this,tt,"f")),c=t(this,De,"m",br).call(this,t(this,rt,"f"));t(this,Me,"f").emit(Y.EVENTS.HEIGHT_CALCULATED,{height:s,stableHeight:c})}}),l(this,Me,e,"f"),l(this,fe,n,"f")}on(e,n){return t(this,Me,"f").subscribe(e,n)}get isExpanded(){return t(this,Xt,"f")}get height(){return t(this,De,"m",Tr).call(this,t(this,tt,"f"))}get stableHeight(){return t(this,De,"m",Tr).call(this,t(this,rt,"f"))}};Me=new WeakMap,tt=new WeakMap,rt=new WeakMap,Xt=new WeakMap,fe=new WeakMap,De=new WeakSet,br=function(e){return e!==!1?e-t(this,fe,"f")+"px":t(this,fe,"f")?`calc(100vh - ${t(this,fe,"f")}px)`:"100vh"},Tr=function(e){return(e===!1?window.innerHeight:e)-t(this,fe,"f")};var y={MAX_BYTES_TO_SEND:4096,MAX_INLINE_QUERY_LENGTH:256,CHAT_TYPES:{USERS:"users",BOTS:"bots",GROUPS:"groups",CHANNELS:"channels"},EVENTS:{THEME_CHANGED:"themeChanged",VIEWPORT_CHANGED:"viewportChanged",MAIN_BUTTON_CLICKED:"mainButtonClicked",BACK_BUTTON_CLICKED:"backButtonClicked",SETTINGS_BUTTON_CLICKED:"settingsButtonClicked",INVOICE_CLOSED:"invoiceClosed",POPUP_CLOSED:"popupClosed",QR_TEXT_RECEIVED:"qrTextReceived",CLIPBOARD_TEXT_RECEIVED:"clipboardTextReceived"}},Yn=Object.values(y.CHAT_TYPES),fn=(()=>{var r,e,n,i,s,c,_,u,b,p,T,h,E,g,w,P,S,v,se,gr,wr,Pr,Ar,vr,zt,Be,H,nt,it,st,Jt,Zt,er,tr,rr,nr,ir,sr,Cr,Sr;let un=[M.inVersion({methodsConfig:{setHeaderColor:{availableInVersion:"6.1",decorate:({appVersion:a,isSupported:o,executeOriginalMethod:f})=>{if(!o){console.warn(`[Telegram.WebApp] Header color is not supported in version ${a}`);return}f()}},setBackgroundColor:{availableInVersion:"6.1",decorate:({appVersion:a,isSupported:o,executeOriginalMethod:f})=>{if(!o){console.warn(`[Telegram.WebApp] Background color is not supported in version ${a}`);return}f()}},enableClosingConfirmation:{availableInVersion:"6.2",decorate:({appVersion:a,isSupported:o,executeOriginalMethod:f})=>{if(!o){console.warn(`[Telegram.WebApp] Closing confirmation is not supported in version ${a}`);return}f()}},disableClosingConfirmation:{availableInVersion:"6.2",decorate:({appVersion:a,isSupported:o,executeOriginalMethod:f})=>{if(!o){console.warn(`[Telegram.WebApp] Closing confirmation is not supported in version ${a}`);return}f()}},switchInlineQuery:{availableInVersion:"6.7",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},openInvoice:{availableInVersion:"6.1",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},showPopup:{availableInVersion:"6.2",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},showAlert:{availableInVersion:"6.2",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},showConfirm:{availableInVersion:"6.2",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},showScanQrPopup:{availableInVersion:"6.4",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},closeScanQrPopup:{availableInVersion:"6.4",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}},readTextFromClipboard:{availableInVersion:"6.4",decorate:({appVersion:a,name:o,isSupported:f,executeOriginalMethod:d})=>{if(!f)throw new F(o,a);d()}}}}),ge],Or,yr=[],oe;var Nr=oe=class{constructor({initData:a,version:o,webView:f,bgColor:d,viewport:x,theme:Q,backButton:hn,mainButton:En,invoices:dn,popup:mn,clipboard:bn,qrPopup:Tn,hapticFeedback:gn}){r.add(this),e.set(this,"unknown"),n.set(this,A.HEADER_COLOR.BG_COLOR),i.set(this,window.innerHeight),s.set(this,!1),c.set(this,void 0),_.set(this,void 0),u.set(this,void 0),b.set(this,void 0),p.set(this,void 0),T.set(this,void 0),h.set(this,void 0),E.set(this,void 0),g.set(this,void 0),w.set(this,void 0),P.set(this,void 0),S.set(this,void 0),v.set(this,void 0),zt.set(this,G=>{if(G.metaKey||G.ctrlKey||!G.target)return;let C=or=>or.tagName==="A",O=G.target;for(;!C(O)&&O.parentNode;)O=O.parentNode;C(O)&&O.target!=="_blank"&&me(O.protocol)&&be(O.hostname)&&(G.preventDefault(),this.openTelegramLink(O.href))}),st.set(this,()=>{t(this,i,"f")!==window.innerHeight&&(l(this,i,window.innerHeight,"f"),t(this,r,"m",H).call(this,y.EVENTS.VIEWPORT_CHANGED,{isStateStable:!0}))}),Jt.set(this,(G,{slug:C,status:O})=>{if(!C||!t(this,w,"f").has(C))return;let{url:U,callback:or}=t(this,w,"f").remove(C);or?.(O),t(this,r,"m",H).call(this,y.EVENTS.INVOICE_CLOSED,{url:U,status:O})}),Zt.set(this,(G,C)=>{C.theme_params&&(t(this,u,"f").setParams(C.theme_params),t(this,g,"f").setParams({}),t(this,T,"f").update(),t(this,r,"m",H).call(this,y.EVENTS.THEME_CHANGED))}),er.set(this,(G,C)=>{C.height&&(window.removeEventListener("resize",t(this,st,"f")),t(this,h,"f").setHeight(C))}),tr.set(this,()=>{t(this,r,"m",H).call(this,y.EVENTS.SETTINGS_BUTTON_CLICKED)}),rr.set(this,(G,C)=>{if(!t(this,P,"f").isOpened)return;let O=t(this,P,"f").callback;t(this,P,"f").close();let U=C.button_id??null;U&&O?.(U),t(this,r,"m",H).call(this,y.EVENTS.POPUP_CLOSED,{button_id:U})}),nr.set(this,(G,{req_id:C,data:O=null})=>{if(!C||!t(this,S,"f").hasRequest(C))return;let U=t(this,S,"f").getRequest(C);t(this,S,"f").removeRequest(C),U?.(O),t(this,r,"m",H).call(this,y.EVENTS.CLIPBOARD_TEXT_RECEIVED,{data:O})}),ir.set(this,(G,C)=>{if(!t(this,v,"f").isOpened)return;let{callback:O}=t(this,v,"f"),U=C.data??null;O?.(U)&&(t(this,v,"f").close(),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_CLOSE_SCAN_QR_POPUP)),t(this,r,"m",H).call(this,y.EVENTS.QR_TEXT_RECEIVED,{data:U})}),sr.set(this,()=>t(this,v,"f").close()),l(this,c,a,"f"),l(this,_,o,"f"),l(this,p,f,"f"),l(this,T,d,"f"),t(this,r,"m",Ar).call(this),l(this,h,x,"f"),t(this,r,"m",Pr).call(this),l(this,b,gn,"f"),t(this,r,"m",vr).call(this),l(this,E,hn,"f"),t(this,r,"m",gr).call(this),l(this,g,En,"f"),t(this,r,"m",se).call(this);let{initParams:We}=t(this,p,"f");l(this,u,Q,"f"),t(this,r,"m",wr).call(this,We.tgWebAppThemeParams),l(this,P,mn,"f"),We.tgWebAppVersion&&t(this,_,"f").set(We.tgWebAppVersion),We.tgWebAppPlatform&&l(this,e,We.tgWebAppPlatform,"f"),l(this,w,dn,"f"),l(this,S,bn,"f"),l(this,v,Tn,"f"),t(this,T,"f").update(),t(this,h,"f").setHeight(),window.addEventListener("resize",t(this,st,"f")),t(this,p,"f").isIframe&&document.addEventListener("click",t(this,zt,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.THEME_CHANGED,t(this,Zt,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.VIEWPORT_CHANGED,t(this,er,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.INVOICE_CLOSED,t(this,Jt,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.SETTINGS_BUTTON_PRESSED,t(this,tr,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.POPUP_CLOSED,t(this,rr,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.QR_TEXT_RECEIVED,t(this,ir,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.SCAN_QR_POPUP_CLOSED,t(this,sr,"f")),t(this,p,"f").onEvent(m.EVENTS.RECEIVE.CLIPBOARD_TEXT_RECEIVED,t(this,nr,"f")),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_REQUEST_THEME),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_REQUEST_VIEWPORT)}get initData(){return t(this,c,"f").rawData}get initDataUnsafe(){return t(this,c,"f").unsafeData}get themeParams(){return t(this,u,"f").params}get colorScheme(){return t(this,u,"f").colorScheme}get version(){return t(this,_,"f").value}get platform(){return t(this,e,"f")}set headerColor(a){this.setHeaderColor(a)}get headerColor(){return t(this,u,"f").getParam(t(this,n,"f"))??""}set backgroundColor(a){t(this,T,"f").set(a)}get backgroundColor(){return t(this,T,"f").get()??""}get HapticFeedback(){return t(this,b,"f")}get BackButton(){return t(this,E,"f")}get MainButton(){return t(this,g,"f")}get viewportHeight(){return t(this,h,"f").height}get viewportStableHeight(){return t(this,h,"f").stableHeight}get isExpanded(){return t(this,h,"f").isExpanded}set isClosingConfirmationEnabled(a){t(this,r,"m",Cr).call(this,a)}get isClosingConfirmationEnabled(){return t(this,s,"f")}setHeaderColor(a){let o=t(this,r,"m",Sr).call(this,a);if(o!==A.HEADER_COLOR.BG_COLOR&&o!==A.HEADER_COLOR.SECONDARY_BG_COLOR)throw new Pt(a);l(this,n,o,"f"),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SET_HEADER_COLOR,void 0,{color_key:o})}setBackgroundColor(a){this.backgroundColor=a}sendData(a){if(!a||!a.length)throw new Ve(`is required ${a}`);if(Dr(a)>y.MAX_BYTES_TO_SEND)throw new Ve(`is too long ${a}`);t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_DATA_SEND,void 0,{data:a})}isVersionAtLeast(a){return t(this,_,"f").isSuitableTo(a)}openLink(a,o){let{protocol:f}=new URL(a);if(!me(f))throw new we(`protocol is not supported ${a}`);if(!t(this,_,"f").isSuitableTo("6.1")){window.open(a,"_blank");return}let d=o??{try_instant_view:!1};t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_OPEN_LINK,void 0,{url:a,try_instant_view:t(this,_,"f").isSuitableTo("6.4")&&d.try_instant_view})}openInvoice(a,o){let f=t(this,w,"f").create(a);t(this,w,"f").save(f,{url:a,callback:o}),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_OPEN_INVOICE,void 0,{slug:f})}openTelegramLink(a){if(!t(this,_,"f").isSuitableTo("6.1"))return;let{protocol:o,hostname:f,pathname:d,search:x}=new URL(a);if(!me(o))throw new we(`protocol is not supported ${a}`);if(!be(f))throw new we(`host is not supported ${a}`);let Q=d+x;if(t(this,p,"f").isIframe){t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_OPEN_TG_LINK,void 0,{path_full:Q});return}location.href="https://t.me"+Q}readTextFromClipboard(a){let o=ct(16);t(this,S,"f").setRequest(o,a),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_READ_TEXT_FROM_CLIPBOARD,void 0,{req_id:o})}enableClosingConfirmation(){l(this,s,!0,"f")}disableClosingConfirmation(){l(this,s,!1,"f")}showPopup(a,o){if(t(this,P,"f").isOpened)throw new mt;if(typeof a!="object"&&a===null)throw new I(`params must be an object ${a}`);t(this,P,"f").open({params:a,callback:o});let f=t(this,P,"f").params??{};t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_OPEN_POPUP,void 0,f)}showAlert(a,o){let f=()=>o?.();this.showPopup({message:a},f)}showConfirm(a,o){let f="ok",d=x=>o?.(x===f);this.showPopup({message:a,buttons:[new X({type:L.TYPES.OK,id:f}).data,new X({type:L.TYPES.CANCEL,id:""}).data]},d)}switchInlineQuery(a,o){if(!t(this,p,"f").initParams.tgWebAppBotInline)throw new At;let f=(a||"").trim();if(f.length>y.MAX_INLINE_QUERY_LENGTH)throw new vt(`is too long ${a}`);let d=o||[];if(!Array.isArray(o))throw new ke(`types should be an array ${o}`);let x=[...new Set(d)];x.forEach(Q=>{if(!Yn.includes(Q))throw new ke(`type is invalid ${Q}`)}),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SWITCH_INLINE_QUERY,void 0,{query:f,chat_types:x})}showScanQrPopup(a,o){t(this,v,"f").open({params:a,callback:o}),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_OPEN_SCAN_QR_POPUP,void 0,t(this,v,"f").params)}closeScanQrPopup(){t(this,v,"f").close(),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_CLOSE_SCAN_QR_POPUP)}onEvent(a,o){t(this,r,"m",nt).call(this,a,o)}offEvent(a,o){t(this,r,"m",it).call(this,a,o)}ready(){t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_READY)}expand(){t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_EXPAND)}close(){t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_CLOSE)}};return e=new WeakMap,n=new WeakMap,i=new WeakMap,s=new WeakMap,c=new WeakMap,_=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakMap,T=new WeakMap,h=new WeakMap,E=new WeakMap,g=new WeakMap,w=new WeakMap,P=new WeakMap,S=new WeakMap,v=new WeakMap,zt=new WeakMap,st=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,er=new WeakMap,tr=new WeakMap,rr=new WeakMap,nr=new WeakMap,ir=new WeakMap,sr=new WeakMap,r=new WeakSet,se=function(){let o=f=>{f&&t(this,r,"m",H).call(this,y.EVENTS.MAIN_BUTTON_CLICKED)};t(this,p,"f").onEvent(m.EVENTS.RECEIVE.MAIN_BUTTON_PRESSED,()=>{o(t(this,g,"f").isActive)}),t(this,g,"f").on(D.EVENTS.DEBUG_BUTTON_CLICKED,o),t(this,g,"f").on(D.EVENTS.DEBUG_BUTTON_UPDATED,t(this,h,"f").setHeight),t(this,g,"f").on(D.EVENTS.UPDATED,f=>{t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SETUP_MAIN_BUTTON,void 0,f)}),t(this,g,"f").on(D.EVENTS.CLICKED,f=>{t(this,r,"m",nt).call(this,y.EVENTS.MAIN_BUTTON_CLICKED,f)}),t(this,g,"f").on(D.EVENTS.OFF_CLICKED,f=>{t(this,r,"m",it).call(this,y.EVENTS.MAIN_BUTTON_CLICKED,f)})},gr=function(){t(this,p,"f").onEvent(m.EVENTS.RECEIVE.BACK_BUTTON_PRESSED,()=>{t(this,r,"m",H).call(this,y.EVENTS.BACK_BUTTON_CLICKED)}),t(this,E,"f")[He](ae.UPDATED,o=>{t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SETUP_BACK_BUTTON,void 0,o)}),t(this,E,"f")[He](ae.CLICKED,o=>{t(this,r,"m",nt).call(this,y.EVENTS.BACK_BUTTON_CLICKED,o)}),t(this,E,"f")[He](ae.OFF_CLICKED,o=>{t(this,r,"m",it).call(this,y.EVENTS.BACK_BUTTON_CLICKED,o)})},wr=function(o){if(t(this,u,"f").on(k.EVENTS.COLOR_SCHEME_CHANGED,d=>t(this,r,"m",Be).call(this,"color-scheme",d)),t(this,u,"f").on(k.EVENTS.THEME_PARAMS_CHANGED,d=>W.set("themeParams",d)),t(this,u,"f").on(k.EVENTS.THEME_PARAM_SET,(d,x)=>{let Q="theme-"+d.split("_").join("-");t(this,r,"m",Be).call(this,Q,x)}),o)try{let d=JSON.parse(o);d&&t(this,u,"f").setParams(d)}catch{}let f=W.get("themeParams");f&&t(this,u,"f").setParams(f)},Pr=function(){t(this,h,"f").on(Y.EVENTS.VIEWPORT_CHANGED,o=>{t(this,r,"m",H).call(this,y.EVENTS.VIEWPORT_CHANGED,{isStateStable:o})}),t(this,h,"f").on(Y.EVENTS.HEIGHT_CALCULATED,({height:o,stableHeight:f})=>{t(this,r,"m",Be).call(this,"viewport-height",o),t(this,r,"m",Be).call(this,"viewport-stable-height",f)})},Ar=function(){t(this,T,"f").on(ne.EVENTS.UPDATED,o=>{t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SET_BACKGROUND_COLOR,void 0,{color:o??""})})},vr=function(){t(this,b,"f")[Ke.PRIVATE_KEYS.ON_EVENT](Ke.EVENTS.FEEDBACK_TRIGGERED,o=>{t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_TRIGGER_HAPTIC_FEEDBACK,void 0,o)})},Be=function(o,f){document.documentElement?.style?.setProperty("--tg-"+o,f)},H=function(o,f){let d=f?[f]:[];t(this,p,"f").callEventCallbacks("webview:"+o,x=>{x.apply(this,d)})},nt=function(o,f){t(this,p,"f").onEvent("webview:"+o,f)},it=function(o,f){t(this,p,"f").offEvent("webview:"+o,f)},Cr=function(o){if(!t(this,_,"f").isSuitableTo("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+t(this,_,"f").value);return}l(this,s,!!o,"f"),t(this,p,"f").postEvent(m.EVENTS.SEND.WEB_APP_SETUP_CLOSING_BEHAVIOR,void 0,{need_confirmation:t(this,s,"f")})},Sr=function(o){if(o===A.HEADER_COLOR.BG_COLOR||o===A.HEADER_COLOR.SECONDARY_BG_COLOR)return o;let f=q(o),d=t(this,u,"f").params;return d.bg_color&&d.bg_color===f?A.HEADER_COLOR.BG_COLOR:d.secondary_bg_color&&d.secondary_bg_color===f?A.HEADER_COLOR.SECONDARY_BG_COLOR:!1},Ee(oe,"TelegramWebApp"),ue(null,Or={value:oe},un,{kind:"class",name:oe.name},null,yr),Nr=oe=Or.value,he(oe,yr),Nr=oe})();var Yt,Qt,Qn="6.0",qt=class{constructor({exposeInMainWorld:e=!1}={}){if(Yt.set(this,void 0),Qt.set(this,void 0),typeof window>"u")throw new Error("Telegram web app can only be launched in browser");let n=Vr(location.hash),i=!1;try{i=!!JSON.parse(n.tgWebAppDebug)}catch{}let s=new ot,c=new Nt(n),_=new $t(n.tgWebAppVersion??Qn);M.version=_;let u=new Rt(n.tgWebAppData),b=new Y({eventEmitter:s,mainButtonHeight:0}),p=new k(s),T=new ne({eventEmitter:s,themeParams:()=>p.params}),h=new _r({eventEmitter:s}),E=new Bt,g=new Ke(s),w=new xt,P=new D({eventEmitter:s,theme:p,isDebug:i}),S=new Ft,v=new Kt,se=new fn({backButton:h,bgColor:T,clipboard:E,hapticFeedback:g,initData:u,invoices:w,mainButton:P,popup:S,qrPopup:v,theme:p,version:_,viewport:b,webView:c});e&&(window.Telegram={WebView:c,WebApp:se,Utils:{urlSafeDecode:de,urlParseQueryString:Re,urlParseHashParams:_t,urlAppendHashParams:Rr,sessionStorageSet:W.set,sessionStorageGet:W.get},TelegramGameProxy_receiveEvent:c.receiveEvent,TelegramGameProxy:{receiveEvent:c.receiveEvent}}),l(this,Yt,se,"f"),l(this,Qt,c,"f")}get WebApp(){return t(this,Yt,"f")}get WebView(){return t(this,Qt,"f")}};Yt=new WeakMap,Qt=new WeakMap;
